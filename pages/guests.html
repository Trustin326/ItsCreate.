<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Guests</title><link rel="stylesheet" href="../assets/css/style.css"></head><body>
<div class="container">
  <nav class="nav"><div class="brand">Wedding MasterPlan</div><div><a class="btn" href="../index.html">Home</a></div></nav>
  <section class="hero"><h1>Guests</h1><p>Track RSVPs and contact info.</p></section>

  <div class="card">
    <input id="gName" placeholder="Name">
    <input id="gEmail" placeholder="Email">
    <input id="gPhone" placeholder="Phone">
    <input id="gRSVP" placeholder="RSVP (yes/no/maybe)">
    <button class="btn primary" id="gAdd">Add Guest</button>
    <hr>
    <table><thead><tr><th>Name</th><th>Email</th><th>Phone</th><th>RSVP</th></tr></thead><tbody id="gRows"></tbody></table>
  </div>

  <footer>Â© <span id="y"></span> Wedding MasterPlan</footer>
</div>
<script src="../js/config.js"></script><script src="../js/app.js"></script>
<script>
document.getElementById('y').textContent=new Date().getFullYear();
async function loadGuests(){try{
  const rows = await sbSelect("guests");
  gRows.innerHTML = rows.map(r=>`<tr><td>${r.name}</td><td>${r.email||""}</td><td>${r.phone||""}</td><td>${r.rsvp_status||"maybe"}</td></tr>`).join("");
}catch(e){console.warn(e)}}
gAdd.addEventListener("click", async ()=>{
  try{await sbInsert("guests",{name:gName.value,email:gEmail.value,phone:gPhone.value,rsvp_status:gRSVP.value||"maybe"});
      gName.value=gEmail.value=gPhone.value=gRSVP.value=""; loadGuests();}
  catch(e){alert("Could not save guest. Check RLS.");}
});
loadGuests();
</script>
</body></html>
